@page
@model IndexModel
@{
ViewData["Title"] = "Allocations overview";
}
<div class="row">
    <div class="col-xs-8">
        <h1 class="heading-xlarge">Allocations overview</h1>
        <form class="year-form" method="get">
            <div class="form-group">
                <label class="form-label" for="select-box">Select year:</label>
                <select class="form-control" id="select-box" name="select-box">
                    <option>2017/2018</option>
                    <option>2016/2017</option>
                    <option>2015/2016</option>
                </select>
            </div>
        </form>
        <div class="graph">
            <img src="~/assets/images/graph.png" />
        </div>
    </div>
    @*end of col-xs-8*@
</div>
@*end of row*@
<div class="row">
    <div class="col-xs-12 col-md-8">
        <div class="panel-group wrap esfa-collapse" id="esfa-list">
            <div class="funding-streams">
                <button class="accordion-toggle">Open all</button>
                @foreach(var budget in Model.Rootobjects)
                {
                    <div class="panel">
                        <div class="panel-heading">
                            <h2 class="panel-title stream-title">
                            <a href="#">
                                @budget.Budget.Name
                            </a>
                            <span class="ammount">&pound;@budget.TotalAmount.ToString("0")</span>
                            </h2>
                            <div class="esfa-summary">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-3">
                                        <div class="data">
                                            <span class="data-item medium">@budget.TotalProviders</span>
                                            <a class="data-link" asp-page="Products/Index"><span class="data-item bold-xsmall">total providers</span></a>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-3">
                                        <div class="data">
                                            <span class="data-item medium">@budget.TestSummary.Passed</span>
                                            <a class="data-link success" asp-page="Products/Index" ><span class="data-item bold-xsmall text-success">covered</span></a>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-3">
                                        <div class="data">
                                            <span class="data-item medium">@budget.TestSummary.Failed</span>
                                            <a class="data-link failing" asp-page="Products/Index" ><span class="data-item bold-xsmall error-message"> tests failing</span></a>
                                        </div>
                                    </div>
                                    <div class="col-xs-11 col-sm-2">
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                                            <div class="progress-bar bg-info" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                            100% Complete (success)     
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                                 aria-valuemin="0" aria-valuemax="100" style="width: 70%">
                                                100% Complete (success)
                                            </div>
                                        </div>
                                        <div class="data">
                                            <span class="data-item bold-xsmall">coverage</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="panel">
                                    <ul class="list-group">
                                        @foreach (var policy in budget.FundingPolicies)
                                        {
                                            <li class="list-group-item">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <details>
                                                            <summary>
                                                                <h3 class="heading-medium list-title summary">@policy.Name <span class="ammount">&pound;@policy.TotalAmount</span></h3>
                                                                <div class="esfa-summary">
                                                                    <div class="row">
                                                                        <div class="col-xs-12 col-sm-3">
                                                                            <div class="data">
                                                                                <span class="data-item medium">1000</span>
                                                                                <a class="data-link" asp-page="Products/Index"><span class="data-item bold-xsmall">total providers</span></a>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xs-12 col-sm-3">
                                                                            <div class="data">
                                                                                <span class="data-item medium">@policy.TestSummary.Passed</span>
                                                                                <a class="data-link success" asp-page="Products/Index"><span class="data-item bold-xsmall text-success">covered</span></a>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xs-12 col-sm-3">
                                                                            <div class="data">
                                                                                <span class="data-item medium">@policy.TestSummary.Failed</span>
                                                                                <a class="data-link failing" asp-page="Products/Index"><span class="data-item bold-xsmall error-message">test failing</span></a>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xs-11 col-sm-2">
                                                                            <div class="progress">
                                                                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                                                                     aria-valuemin="0" aria-valuemax="100" style="width:70%">
                                                                                    70% Complete (success)
                                                                                </div>
                                                                            </div>
                                                                            <div class="data">
                                                                                <span class="data-item bold-xsmall">coverage</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </summary>

                                                            <div class="panel panel-border-narrow">
                                                                <ul class="list-group">
                                                                    @foreach (var allocationLine in policy.AllocationLines ?? new List<AllocationLine>())
                                                                    {
                                                                        <li class="list-group-item sublist-item">
                                                                            <h4 class="heading-small">
                                                                                <a asp-page="Products/Index" asp-route-id="@allocationLine.Name">@allocationLine.Name</a>
                                                                                <span class="ammount">&pound;17 billion</span>
                                                                            </h4>
                                                                            <div class="esfa-summary">
                                                                                <div class="row">
                                                                                    <div class="col-xs-12 col-sm-3">
                                                                                        <div class="data">
                                                                                            <span class="data-item medium">1000</span>
                                                                                            <a class="data-link" asp-page="Products/Index"><span class="data-item bold-xsmall">total providers</span></a>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-xs-12 col-sm-3">
                                                                                        <div class="data">
                                                                                            <span class="data-item medium">@allocationLine.TestSummary.Passed</span>
                                                                                            <a class="data-link success" asp-page="Products/Index"><span class="data-item bold-xsmall text-success">covered</span></a>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-xs-12 col-sm-3">
                                                                                        <div class="data">
                                                                                            <span class="data-item medium">@allocationLine.TestSummary.Failed</span>
                                                                                            <a class="data-link failing" asp-page="Products/Index"><span class="data-item bold-xsmall error-message">test failing</span></a>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-xs-11 col-sm-2">
                                                                                        <div class="progress">
                                                                                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                                                                                 aria-valuemin="0" aria-valuemax="100" style="width:70%">
                                                                                                70% Complete (success)
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="data">
                                                                                            <span class="data-item bold-xsmall">coverage</span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                    }
                                                                </ul>
                                                            </div>
                                                            @*end of panel.panel-border-narrow*@
                                                        </details>
                                                    </div>
                                                    @*end of col-xs-12*@
                                                </div>
                                                @*end of row*@
                                            </li>
                                         }
    
                                    </ul>
                                </div>
                                @*end of panel inside panel-body*@
                            </div>
                            @*end of panel-body*@
                        </div>
                        @*end of panel-collapse*@
                    </div>
                    @*end of panel*@
                }
                @*end of foreach*@
            </div>
        </div>
         @*end of #esfa-collapse*@  
    </div>
     @*end of .col-xs-12*@  
</div>
 @*end of .row*@  